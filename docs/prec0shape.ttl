# This document describes the SHACL shape of every RDF graph generated by
# PREC without any context

@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix pgo: <http://ii.uwb.edu.pl/pgo#>.
@prefix prec: <http://bruy.at/prec#>.
@prefix dash: <http://datashapes.org/dash#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

prec:NodeShape a sh:NodeShape ;
  sh:targetClass pgo:Node .

prec:EdgeShape a sh:NodeShape ;
  sh:targetClass pgo:Edge ;
  sh:property [ sh:path rdf:subject   ; sh:class pgo:Node ; sh:minCount 1 ; sh:maxCount 1 ] ;
  sh:property [ sh:path rdf:object    ; sh:class pgo:Node ; sh:minCount 1 ; sh:maxCount 1 ] ;
  sh:property [ sh:path rdf:predicate                     ; sh:minCount 1 ; sh:maxCount 1 ] .

prec:PropertyValueShape a sh:NodeShape ;
  sh:targetClass prec:PropertyValue ;
  sh:or (
    # The value must be either a literal
    [
      sh:path rdf:value ;
      sh:nodeKind sh:Literal
    ]
    # Or a list of literals
    [
      sh:path rdf:value ;
      sh:property [
        sh:path ( [ sh:zeroOrMorePath rdf:rest ] rdf:first ) ;
        sh:nodeKind sh:Literal
      ]
    ]
  )
.

# TODO:
# All predicates of type prec:Property must have :
# - either a pgo:Node or a pgo:Edge as subject
# - a prec:PropertyValue as object.
